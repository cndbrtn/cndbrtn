(this["webpackJsonpproject-three"]=this["webpackJsonpproject-three"]||[]).push([[0],{100:function(e,t,a){"use strict";a.r(t);var l=a(0),n=a.n(l),r=a(36),c=a.n(r),o=a(4),s=a(1),m=a(12),i=a(41),u=a(2);const d=Object(l.createContext)(),p=d.Provider,g=(e,t)=>{switch(t.type){case"SET_CURRENT_USER":return Object(u.a)({},e,{type:t.type,_id:t._id,username:t.username,postId:t.postId,postImg:t.postImg,postTitle:t.postTitle,postDesc:t.postDesc,postTags:t.postTags,password:""});case"LOGIN_USER":case"ADD_USER":return Object(u.a)({},t);case"GALLERY_PROPS":return Object(u.a)({},e,{},t);default:return e}};let E={type:"",_id:"0",username:"",journal:[],works:[],favorites:[],password:"",uploaded:!1,postId:"",postImg:"",postTitle:"",postDesc:"",postTags:[]};const b=e=>{e.value;let t=Object(i.a)(e,["value"]);const a=Object(l.useReducer)(g,E),r=Object(o.a)(a,2),c=r[0],s=r[1];return n.a.createElement(p,Object.assign({value:[c,s]},t))},f=()=>Object(l.useContext)(d);var v=e=>n.a.createElement("div",{className:"router-container"},e.children," ",e.loggedIn),h=a(16);var w=e=>{const t=e.works.works.map(e=>e.tags),a=[];t.filter(e=>{for(let t=0;t<e.length;t++)"nsfw"===e[t]&&a.push(e)});e.works.works.filter(e=>{var t,l=Object(h.a)(a);try{for(l.s();!(t=l.n()).done;){let a=t.value;if(e.tags===a)return e}}catch(n){l.e(n)}finally{l.f()}});const l=[];e.works.works.filter(t=>{var n,r=Object(h.a)(a);try{for(r.s();!(n=r.n()).done;){let a=n.value;t.tags!==a||e.loggedIn||(t.img="/images/r18-warning.jpg",l.push(t))}}catch(c){r.e(c)}finally{r.f()}return t});return n.a.createElement("div",{className:"recent-art"},n.a.createElement("h1",null,"Recently uploaded art:"),n.a.createElement("div",{className:"recent-box"},e.works.works.map(e=>n.a.createElement("div",{className:"post",key:e._id},n.a.createElement("div",{className:"gall-thumb"},n.a.createElement(s.b,{to:{state:{postId:e._id,postTitle:e.title,postImg:e.img,postDesc:e.description,postTags:e.tags}}},n.a.createElement("img",{src:e.img,alt:e._id}))),n.a.createElement("div",null,n.a.createElement("h2",null,e.title))))))},y=a(5),j=a.n(y),O=function(e){return j.a.get("/api/user/"+e)},k=function(e){return j.a.post("/api/user",{username:e.username,password:e.password,email:e.email})},N=e=>j.a.put("/api/user/"+e._id,Object(u.a)({},e)),_=function(e){return j.a.post("/api/user/login",{username:e.username,password:e.password})},x=function(){return j.a.post("/api/user/logout")},S=function(){return j.a.get("/api/user")},I=()=>j.a.get("/api/artwork"),C=e=>j.a.post("/api/artwork",e),R=(e,t)=>j.a.put("/api/artwork/"+e,Object(u.a)({},t)),T=e=>j.a.delete("/api/artwork/"+e),D=e=>j.a.post("/api/blog",e),U=e=>j.a.get("/api/blog/"+e),P=(e,t)=>j.a.put("/api/blog/"+e,Object(u.a)({},t)),L=e=>j.a.delete("/api/blog/"+e),B=a(14);const F={"default-state":{gradients:[["#00a84c","#b3ff00"],["#00ffff","#556270"],["#ff0062","#7ea0c4"],["#6200ff","#fd0000"]],transitionSpeed:7e3}},G={source:"../images/bg.jpeg",blendingMode:"multiply"};var W=e=>{console.log("props in login",e);const t=Object(l.useState)({username:"",password:""}),a=Object(o.a)(t,2),r=a[0],c=a[1],m=Object(l.useState)({works:[]}),i=Object(o.a)(m,2),u=i[0],d=i[1];Object(l.useEffect)(()=>{I().then(e=>{d({works:e.data})})},[e.loggedIn]),console.log("art",u);const p=Object(l.useRef)(),g=Object(l.useRef)(),E=()=>{const e=p.current.value,t=g.current.value;c({username:e,password:t})},b=e=>{e.preventDefault();const t={username:r.username,password:r.password};console.log("components/Login.js login",t),_(t).then(e=>{console.log("Login.js api.login() result",e.data.username),window.location.assign("/".concat(e.data.username,"/gallery"))}).catch(e=>console.log(e))};return u?n.a.createElement("div",{className:"login-page"},n.a.createElement("div",{className:"container login"},n.a.createElement("div",null,n.a.createElement("h1",null,n.a.createElement("span",null,"X"),"folio:"),e.loggedIn?n.a.createElement("div",null,n.a.createElement("h1",null,"Welcome back ",e.username,"!"),n.a.createElement("p",null,n.a.createElement(s.b,{to:"".concat(e.username,"/gallery")},"Your Gallery")),n.a.createElement("p",null,n.a.createElement(s.b,{to:"".concat(e.username,"/blog")},"Your Blog"))):n.a.createElement("form",null,n.a.createElement("div",null,n.a.createElement("input",{type:"text",name:"username",placeholder:"username",onChange:E,ref:p})),n.a.createElement("div",null,n.a.createElement("input",{type:"password",name:"password",placeholder:"password",onChange:E,ref:g})),n.a.createElement(s.b,{to:"/Signup"},n.a.createElement("p",null,"New to Xfolio? Sign up here")),n.a.createElement("div",null,n.a.createElement("button",{name:"login",onClick:b},"sign in"))))),n.a.createElement(w,{works:u,loggedIn:e.loggedIn}),n.a.createElement(B.a,{isPausedWhenNotInView:"true",image:G,states:F,id:"canvas-image"})):n.a.createElement("div",{className:"login-page"},n.a.createElement("div",{className:"container login"},n.a.createElement("div",null,n.a.createElement("h1",null,n.a.createElement("span",null,"X"),"folio:"),e.loggedIn?n.a.createElement("div",null,n.a.createElement("h1",null,"Welcome back ",e.username,"!"),n.a.createElement("p",null,n.a.createElement(s.b,{to:"".concat(e.username,"/gallery")},"Your Gallery")),n.a.createElement("p",null,n.a.createElement(s.b,{to:"".concat(e.username,"/blog")},"Your Blog"))):n.a.createElement("form",null,n.a.createElement("div",null,n.a.createElement("input",{type:"text",name:"username",placeholder:"Username",onChange:E,ref:p})),n.a.createElement("div",null,n.a.createElement("input",{type:"password",name:"password",placeholder:"password",onChange:E,ref:g})),n.a.createElement(s.b,{to:"/Signup"},n.a.createElement("p",null,"New to Xfolio? Sign up here")),n.a.createElement("div",null,n.a.createElement("button",{name:"login",onClick:b},"sign in"))))),n.a.createElement(B.a,{isPausedWhenNotInView:"true",image:G,states:F,id:"canvas-image"}))};const V={"default-state":{gradients:[["#e5ff00","#ff5100"],["#00ffff","#556270"],["#ff0062","#7ea0c4"],["#6200ff","#fd0000"]],transitionSpeed:7e3}},Y={source:"../images/bg.jpeg",blendingMode:"multiply"};var H=()=>{const e=f(),t=Object(o.a)(e,2),a=(t[0],t[1],Object(l.useState)({})),r=Object(o.a)(a,2),c=r[0],m=r[1],i=Object(l.useRef)(),u=Object(l.useRef)(),d=Object(l.useRef)(),p=()=>{const e=i.current.value,t=u.current.value,a=d.current.value;m({username:t,password:a,email:e})};return n.a.createElement("div",{className:"signup-page"},n.a.createElement("div",{className:"container login signup"},n.a.createElement("div",null,n.a.createElement("form",null,n.a.createElement("h1",null,"Welcome to ",n.a.createElement("span",null,"X"),"folio!"),n.a.createElement("div",null,n.a.createElement("input",{type:"text",name:"email",placeholder:"email",onChange:p,ref:i})),n.a.createElement("div",null,n.a.createElement("input",{type:"text",name:"username",placeholder:"username",onChange:p,ref:u})),n.a.createElement("div",null,n.a.createElement("input",{type:"password",name:"password",placeholder:"password",onChange:p,ref:d})),n.a.createElement(s.b,{to:"/Login"},n.a.createElement("p",null,"Already have an account? Log in here")),n.a.createElement("div",null,n.a.createElement("button",{name:"signup",onClick:e=>{e.preventDefault();const t={email:c.email,username:c.username,password:c.password};k(t).then(()=>{_({username:c.username,password:c.password}),window.location.assign("".concat(c.username,"/setup"))})}},"sign up"),n.a.createElement("br",null))))),n.a.createElement(B.a,{isPausedWhenNotInView:"true",image:Y,states:V,id:"canvas-image"}))};var X=e=>{const t=e.location.state;return n.a.createElement("div",{className:"detail"},t?n.a.createElement("div",{className:"detail-box"},n.a.createElement("div",{className:"full-info"},n.a.createElement("div",null,n.a.createElement("h1",null,t.postTitle)),n.a.createElement("div",null,t.postDesc),n.a.createElement("div",{className:"tags"},n.a.createElement("p",null,"Tagged: ",t.postTags.map(e=>n.a.createElement("span",{key:e},e," ")))),n.a.createElement("p",null,n.a.createElement(s.b,{to:"../../../"+e.match.params.username+"/gallery"},"Back to gallery")),n.a.createElement("p",null,n.a.createElement(s.b,{to:""},"Home"))),n.a.createElement("div",{className:"full-image"},n.a.createElement("img",{className:"full-image",src:t.postImg,alt:t.postTitle}))):n.a.createElement("h3",null,"Loading..."))},A=a(13);var M=e=>{const t=f(),a=Object(o.a)(t,2),l=a[0],r=a[1],c=l.journal;return c.length?n.a.createElement("div",null,c.map(t=>n.a.createElement("div",{key:t._id,className:"postbox"},n.a.createElement(s.b,{to:{pathname:"blog/"+t._id,state:Object(u.a)({},t)}},n.a.createElement("h2",null,t.title)),n.a.createElement("div",null,t.body),n.a.createElement("div",{className:"tags"},t.tags),e.loggedIn?n.a.createElement("div",null,n.a.createElement("button",{className:"del-butt",onClick:()=>{return e=t._id,L(e),void r(Object(u.a)({},l,{uploaded:!0}));var e}},n.a.createElement(A.a,{icon:"trash"})),n.a.createElement("button",{className:"edit-butt"},n.a.createElement(s.b,{to:{pathname:"blog/update/".concat(t._id),state:Object(u.a)({},t,{user:e._id})}},n.a.createElement(A.a,{icon:"pencil-alt"})))):n.a.createElement("span",null)))):n.a.createElement("div",null,n.a.createElement("h3",null,"You don't have any posts yet"))};var J=()=>{const e=f(),t=Object(o.a)(e,2),a=t[0],r=t[1],c=Object(l.useState)(),s=Object(o.a)(c,2),m=s[0],i=s[1],d=Object(l.useRef)(),p=Object(l.useRef)(),g=Object(l.useRef)();return console.log("postState",m),n.a.createElement("div",{className:"blog-upload"},n.a.createElement("h2",null,"Make a post:"),n.a.createElement("form",{onChange:e=>{e.preventDefault();const t=d.current.value,a=p.current.value,l=g.current.value.split(",").map(e=>e.trim().replace(/\s+/g,"_"));console.log({title:t,body:a,tags:[l]}),i({title:t,body:a,tags:l})}},n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"title"},"Title:"),n.a.createElement("br",null),n.a.createElement("input",{type:"text",name:"title",ref:d})),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"body"},"Post:"),n.a.createElement("br",null),n.a.createElement("textarea",{name:"body",ref:p})),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"tags"},"Tags, separated by a comma:"),n.a.createElement("br",null),n.a.createElement("input",{type:"text",name:"tags",ref:g})),n.a.createElement("div",null,n.a.createElement("button",{name:"submit",onClick:e=>{e.preventDefault();const t=m.title,l=m.body,n=m.tags,c=a._id;D({userId:c,title:t,body:l,tags:n}),r(Object(u.a)({},a,{type:"GALLERY_PROPS",uploaded:!0}))}},"Submit Post"))))};var K=e=>{const t=f(),a=Object(o.a)(t,2),r=a[0],c=a[1],m=window.location.toString().split("/");Object(l.useEffect)(()=>{U(m[3]).then(e=>{c(Object(u.a)({},r,{_id:e.data._id,type:"GALLERY_PROPS",journal:e.data.journal,uploaded:!1}))}).catch(e=>console.log("err",e))},[r.uploaded]);return n.a.createElement("div",{className:"blog"},n.a.createElement("div",{className:"blog-upload"},e.loggedIn?n.a.createElement("div",null,n.a.createElement("h1",null,n.a.createElement("span",null,"H"),"ello ",e.username),n.a.createElement(J,null)):n.a.createElement("div",null,n.a.createElement("h2",null,m[3],"'s blog")),n.a.createElement("div",null,n.a.createElement(s.b,{to:"gallery"},"Go To Gallery")," "),n.a.createElement("div",null,n.a.createElement(s.b,{to:""},"Home")),e.loggedIn?n.a.createElement("div",null,n.a.createElement("p",null,n.a.createElement(s.b,{to:"#",onClick:()=>{x(),window.location.assign("../../")}},"Log out"))):n.a.createElement("div",null,n.a.createElement("p",null,n.a.createElement(s.b,{to:""},"Sign in")),n.a.createElement("p",null,n.a.createElement(s.b,{to:"/signup"},"Sign up")))),n.a.createElement("div",{className:"posts"},n.a.createElement(M,{loggedIn:e.loggedIn,_id:e._id})))};var $=()=>{const e=f(),t=Object(o.a)(e,2),a=t[0],r=t[1];console.log("state in upload",a);const c=Object(l.useState)({message:"",file:"",fileUrl:"",url:""}),s=Object(o.a)(c,2),m=s[0],i=s[1],d=Object(l.useState)({title:"",postBody:"",tags:[]}),p=Object(o.a)(d,2),g=p[0],E=p[1],b=Object(l.useRef)(),v=Object(l.useRef)(),h=Object(l.useRef)(),w=Object(l.useRef)(),y=window.location.host,O=window.location.protocol,k=e=>{const t=g.title,l=g.postBody,n=g.tags,c=a._id;console.log("_id in handlePost",c),C({userId:c,url:e,title:t,postBody:l,tags:n}),i({fileUrl:""}),r(Object(u.a)({},a,{uploaded:!0})),v.current.value="",h.current.value="",w.current.value=""},N=e=>{e.preventDefault();const t=v.current.value,a=h.current.value,l=w.current.value.split(",").map(e=>e.trim().replace(/\s+/g,"_"));E(Object(u.a)({},g,{title:t,postBody:a,tags:l}))};return n.a.createElement("div",null,n.a.createElement("form",null,n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"upload"},"Choose an image"),n.a.createElement("input",{id:"upload-file",type:"file",name:"upload",accept:"image/*",onChange:e=>{e.preventDefault();const t=b.current.files;if(t&&t.length>0){const a=t[0];i(Object(u.a)({},m,{file:a,fileUrl:URL.createObjectURL(e.target.files[0])}))}},ref:b})),n.a.createElement("div",{className:"upload-mess"},m.message),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"title"}," Title: "),n.a.createElement("input",{type:"text",name:"title",ref:v,onChange:N})),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"body"},"Description:"),n.a.createElement("textarea",{name:"body",ref:h,onChange:N})),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"tags"},"Tags, separated by a comma:"),n.a.createElement("input",{type:"text",name:"tags",ref:w,onChange:N})),n.a.createElement("div",null,n.a.createElement("button",{onClick:e=>{e.preventDefault();const t=m.file;i(Object(u.a)({},m,{message:"Uploading..."}));const l=t.type,n="".concat(O,"//").concat(y,"/generate-put-url"),r={params:{Key:"".concat(a.username,"/works/").concat(Date.now(),"_").concat(t.name),ContentType:l},headers:{"Content-Type":l}};j.a.get(n,r).then(e=>{const a=e.data;j.a.put(a,t,r).then(e=>{i(Object(u.a)({},m,{message:"Upload Successful"}));const t=e.config.params,a="".concat(O,"//").concat(y,"/generate-put-url"),l={params:t};j.a.get(a,l).then(e=>{const t=e.data.replace(/\?.*/,"");i(Object(u.a)({},m,{url:t})),k(t)})}).catch(e=>{i(Object(u.a)({},m,{message:"Something went wrong, try again"})),console.log("err",e)})})}},"Submit")),m.fileUrl?n.a.createElement("div",{className:"upload-prev"},n.a.createElement("img",{src:m.fileUrl,alt:"preview",width:"140px"})):n.a.createElement("h4",null,"Preview...")))};var q=e=>{const t=e.tags;return n.a.createElement(s.b,{to:{pathname:"gallery/"+t,state:{works:e.works}},key:t},t)};var z=e=>{const t=f(),a=Object(o.a)(t,2),r=a[0],c=a[1],m=Object(l.useState)({works:[],pfp:"",nickname:"",bio:"",twitter:"",_id:""}),i=Object(o.a)(m,2),d=i[0],p=i[1],g=window.location.pathname.split("/");console.log("worksState",d),console.log("props",e),Object(l.useEffect)(()=>{O(g[1]).then(e=>{console.log("gallery get res",e.data),p({works:e.data.works,pfp:e.data.pfp,nickname:e.data.nickname,twitter:e.data.twitter,bio:e.data.bio,_id:e.data._id}),c(Object(u.a)({},r,{type:"GALLERY_PROPS",username:e.data.username,_id:e.data._id,uploaded:!1}))})},[r.uploaded]);const E=d.works,b=(d.nickname,d.pfp),v=d.twitter,h=d.bio;console.log("works in gallery",E);const w=()=>{x(),window.location.assign("../../")};return E&&E.length?n.a.createElement("div",{className:"gallery-box"},n.a.createElement("div",{className:"profile"},n.a.createElement("h1",null,"Welcome to ",n.a.createElement("span",null,"X"),"folio: ",e.username),n.a.createElement("img",{src:b,alt:"profile picture",height:"150px",width:"150px"}),n.a.createElement("a",{href:v,target:"_blank"},n.a.createElement(A.a,{icon:["fab","twitter"]})," profile"),n.a.createElement("p",null,"Bio: ",h),e.loggedIn?n.a.createElement("div",null,n.a.createElement(s.b,{to:"../../".concat(e.username,"/setup")},"Update Profile"),n.a.createElement($,null)):n.a.createElement("div",null,n.a.createElement("h2",null,"Now viewing ",g[1],"'s gallery")),n.a.createElement(s.b,{to:"blog"},"Blog Page"),n.a.createElement("div",null,n.a.createElement(s.b,{to:{pathname:"gallery/".concat("portfolio"),state:{works:E}}},"Portfolio")),n.a.createElement("div",null,n.a.createElement(s.b,{to:""},"Home")),e.loggedIn?n.a.createElement("p",null,n.a.createElement(s.b,{to:"#",onClick:w},"Log out")):n.a.createElement("div",null,n.a.createElement("p",null,n.a.createElement(s.b,{to:"/login"},"Sign in")),n.a.createElement("p",null,n.a.createElement(s.b,{to:"/signup"},"Sign up")))),n.a.createElement("div",{className:"gallery"},E.map(t=>n.a.createElement("div",{className:"gall",key:t._id},n.a.createElement("div",{className:"gall-thumb"},n.a.createElement(s.b,{to:{pathname:"gallery/work/"+t._id,state:{postId:t._id,postTitle:t.title,postImg:t.img,postDesc:t.description,postTags:t.tags}}},n.a.createElement("img",{src:t.img,alt:t.title}))),n.a.createElement("div",{className:"gall-info"},n.a.createElement("div",{className:"gall-title"},t.title),n.a.createElement("div",{className:"gall-tags"},t.tags.map(e=>n.a.createElement("span",{key:e},n.a.createElement(q,{works:E,tags:e})," "))),e.loggedIn?n.a.createElement("div",null,n.a.createElement("button",{className:"del-butt",onClick:()=>{return e=t._id,T(e),void c(Object(u.a)({},r,{uploaded:!0}));var e}},n.a.createElement(A.a,{icon:"trash"})),n.a.createElement("button",{className:"edit-butt"},n.a.createElement(s.b,{to:{pathname:"gallery/update/"+t._id,state:Object(u.a)({},t)}},n.a.createElement(A.a,{icon:"pencil-alt"})))):n.a.createElement("span",null)))))):n.a.createElement("div",{className:"gallery-box"},n.a.createElement("div",{className:"profile"},n.a.createElement("h1",null,"Welcome to ",n.a.createElement("span",null,"X"),"folio: ",e.username),n.a.createElement("img",{src:b,alt:"profile picture",height:"150px",width:"150px"}),n.a.createElement("a",{href:v,target:"_blank"},n.a.createElement(A.a,{icon:["fab","twitter"]})," profile"),n.a.createElement("div",null,n.a.createElement("p",null,"Bio: ",h)),e.loggedIn?n.a.createElement("div",null,n.a.createElement(s.b,{to:"../../".concat(e.username,"/setup")},"Update Profile"),n.a.createElement($,null)):n.a.createElement("div",null,n.a.createElement("h2",null,g[1],"'s gallery")),n.a.createElement(s.b,{to:"blog"},"Go To Blog"),e.loggedIn?n.a.createElement("div",null,n.a.createElement("p",null,n.a.createElement(s.b,{to:"#",onClick:w},"Log out"))):n.a.createElement("div",null,n.a.createElement("p",null,n.a.createElement(s.b,{to:"/login"},"Sign in")),n.a.createElement("p",null,n.a.createElement(s.b,{to:"/signup"},"Sign up"))),n.a.createElement("div",null,n.a.createElement(s.b,{to:""},"Home"))),n.a.createElement("div",{className:"gallery"},n.a.createElement("h3",null,"No posts yet!")))};var Q=e=>{const t=e.location.state;return n.a.createElement("div",{className:"single-post"},n.a.createElement(s.b,{to:{pathname:"../blog"}},"Back to blog"),t?n.a.createElement("div",null,n.a.createElement("div",{className:"post-title"},n.a.createElement("h1",null,t.title)),n.a.createElement("div",{className:"post-body"},n.a.createElement("p",null,t.body)),n.a.createElement("div",{className:"post-tags"},"Tagged: ",t.tags.map(e=>n.a.createElement("span",{key:e},e," "))),n.a.createElement("div",null,n.a.createElement(s.b,{onClick:()=>window.history.back()},"Go back"))):n.a.createElement("h3",null,"Loading..."))};var Z=e=>{const t=e.location.state.works.map(e=>e.tags),a=[];t.filter(t=>{for(let l=0;l<t.length;l++)t[l]===e.match.params.tag&&a.push(t)});const l=e.location.state.works.filter(e=>{var t,l=Object(h.a)(a);try{for(l.s();!(t=l.n()).done;){let a=t.value;if(e.tags===a)return e}}catch(n){l.e(n)}finally{l.f()}});return l.length?n.a.createElement("div",{className:"gallery-box"},n.a.createElement("div",{className:"profile"},n.a.createElement("h2",null,"Here's all artworks tagged '",e.match.params.tag,"'"),n.a.createElement("div",null,n.a.createElement("p",null,n.a.createElement(s.b,{to:"../../"+e.match.params.username+"/gallery"},"Go back")))),n.a.createElement("div",{className:"gallery"},l.map(e=>n.a.createElement("div",{key:e._id,className:"gall"},n.a.createElement("div",{className:"gall-thumb"},n.a.createElement(s.b,{to:{pathname:"work/"+e._id,state:{postId:e._id,postTitle:e.title,postImg:e.img,postDesc:e.description,postTags:e.tags}}},n.a.createElement("img",{src:e.img,alt:e.title}))),n.a.createElement("div",null,n.a.createElement("h2",null,n.a.createElement("i",null,e.title))),n.a.createElement("div",null,e.description),n.a.createElement("div",{className:"gall-tags"},e.tags))))):n.a.createElement("div",{className:"detail-box"},n.a.createElement("div",{className:"profile"},n.a.createElement("h2",null,"Here's all artworks tagged '",e.match.params.tag,"'"),n.a.createElement("div",null,n.a.createElement("p",null,n.a.createElement(s.b,{to:"../../"+e.match.params.username+"/gallery"},"Go back")))),n.a.createElement("div",{className:"gallery"},n.a.createElement("h1",null,"No posts tagged '",e.match.params.tag,"' yet")))};var ee=({location:e,match:t})=>{const a=Object(l.useState)(),r=Object(o.a)(a,2),c=r[0],m=r[1],i=e.state,u=t.params,d=Object(l.useRef)(),p=Object(l.useRef)(),g=Object(l.useRef)();return n.a.createElement("div",null,n.a.createElement("form",{onChange:()=>{m({title:d.current.value,description:p.current.value,tags:g.current.value.split(",")})}},n.a.createElement("div",{className:"detail-box"},n.a.createElement("div",{className:"full-info"},n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"title"},"Title:"),n.a.createElement("input",{type:"text",name:"title",defaultValue:i.title,ref:d})),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"body"},"Description:"),n.a.createElement("textarea",{name:"body",defaultValue:i.description,ref:p})),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"tags"},"Tags, separated by a comma:"),n.a.createElement("input",{name:"tags",type:"text",defaultValue:i.tags,ref:g})),n.a.createElement("div",null,n.a.createElement("button",{onClick:e=>{e.preventDefault(),R(u.id,c),window.location.assign("/"+u.username+"/gallery")}},"Save")),n.a.createElement("div",{className:"go-back"},n.a.createElement(s.b,{to:"/"+u.username+"/gallery"},"Go back"))),n.a.createElement("div",{className:"full-image"},n.a.createElement("img",{className:"full-image",src:i.img,alt:i.title})))))};var te=e=>{const t=Object(l.useState)(),a=Object(o.a)(t,2),r=a[0],c=a[1],s=Object(l.useRef)(),m=Object(l.useRef)(),i=Object(l.useRef)();return n.a.createElement("div",{className:"dark"},n.a.createElement("div",null,n.a.createElement("h1",null,"update this post?")),n.a.createElement("div",{className:"blog-upload"},n.a.createElement("form",{onChange:()=>{c({title:s.current.value,body:m.current.value,tags:i.current.value})}},n.a.createElement("div",null,n.a.createElement("input",{type:"text",defaultValue:e.location.state.title,ref:s})),n.a.createElement("div",null,n.a.createElement("textarea",{defaultValue:e.location.state.body,ref:m})),n.a.createElement("div",null,n.a.createElement("input",{type:"text",defaultValue:e.location.state.tags,ref:i})),n.a.createElement("div",null,n.a.createElement("button",{onClick:t=>{t.preventDefault(),P(e.match.params.id,r),window.location.assign("../../../".concat(e.match.params.username,"/blog"))}},"Submit")))))};var ae=e=>{const t=Object(l.useState)({message:"",file:"",fileUrl:"",url:""}),a=Object(o.a)(t,2),r=a[0],c=a[1],s=Object(l.useState)({nickname:"",bio:"",twitter:""}),m=Object(o.a)(s,2),i=m[0],d=m[1],p=Object(l.useRef)(),g=Object(l.useRef)(),E=Object(l.useRef)(),b=Object(l.useRef)(),f=window.location.host,v=window.location.protocol;console.log("bioState",i);const h=t=>{const a=i.nickname,l=i.bio,n=i.twitter,r={_id:e._id,pfp:t,nickname:a,bio:l,twitter:n};console.log("newPF",r),N(r),window.location.assign("../../".concat(e.username,"/gallery"))},w=()=>{const e=b.current.value,t=E.current.value,a=g.current.value;d(Object(u.a)({},i,{nickname:e,bio:t,twitter:a}))};return n.a.createElement("div",{className:"signup-page"},n.a.createElement("div",{className:"container signup login"},n.a.createElement("form",null,n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"upload"},"Choose an image"),n.a.createElement("input",{id:"upload-file",type:"file",name:"upload",accept:"image/*",onChange:e=>{e.preventDefault();const t=p.current.files;if(t&&t.length>0){const a=t[0];c(Object(u.a)({},r,{file:a,fileUrl:URL.createObjectURL(e.target.files[0])}))}},ref:p})),r.fileUrl?n.a.createElement("div",{className:"upload-prev"},n.a.createElement("img",{src:r.fileUrl,alt:"preview",width:"140px"})):n.a.createElement("h4",null,"Preview..."),n.a.createElement("div",{className:"upload-mess"},r.message),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"nickname"},"Nickname: "),n.a.createElement("br",null),n.a.createElement("input",{type:"text",name:"title",ref:b,onChange:w})),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"bio"},"Bio:"),n.a.createElement("br",null),n.a.createElement("textarea",{name:"body",ref:E,onChange:w})),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"twit"},"Twitter:"),n.a.createElement("br",null),n.a.createElement("input",{type:"text",name:"twit",ref:g,onChange:w})),n.a.createElement("div",null,n.a.createElement("button",{onClick:t=>{t.preventDefault();const a=r.file;c(Object(u.a)({},r,{message:"Uploading..."}));const l=a.type,n="".concat(v,"//").concat(f,"/generate-put-url"),o={params:{Key:"".concat(e.username,"/pfp/").concat(Date.now(),"_").concat(a.name),ContentType:l},headers:{"Content-Type":l}};j.a.get(n,o).then(e=>{const t=e.data;j.a.put(t,a,o).then(e=>{c(Object(u.a)({},r,{message:"Upload Successful"}));const t=e.config.params,a="".concat(v,"//").concat(f,"/generate-put-url"),l={params:t};j.a.get(a,l).then(e=>{const t=e.data.replace(/\?.*/,"");c(Object(u.a)({},r,{url:t})),h(t)})}).catch(e=>{c(Object(u.a)({},r,{message:"Something went wrong, try again"})),console.log("err",e)})})}},"Submit")))),n.a.createElement(B.a,{isPausedWhenNotInView:"true",image:{source:"../images/bg.jpeg",blendingMode:"multiply"},states:{"default-state":{gradients:[["#e5ff00","#ff5100"],["#00ffff","#556270"],["#ff0062","#7ea0c4"],["#6200ff","#fd0000"]],transitionSpeed:7e3}},id:"canvas-image"}))},le=a(17),ne=a(40),re=a(24);le.b.add(ne.a,re.b,re.a);var ce=()=>{const e=Object(l.useState)({loggedIn:!1,username:"",_id:""}),t=Object(o.a)(e,2),a=t[0],r=t[1];Object(l.useEffect)(()=>{S().then(e=>{r({loggedIn:!0,username:e.data.user[0].username,_id:e.data.user[0]._id})}).catch(e=>{console.log("error",e)})},[]);const c=a.loggedIn,i=a.username,u=a._id;return n.a.createElement(b,null,n.a.createElement(s.a,null,n.a.createElement(v,{loggedIn:c},n.a.createElement(m.c,null,n.a.createElement(m.a,{exact:!0,path:["/","/login"]},n.a.createElement(W,{loggedIn:c,username:i,id:u})),n.a.createElement(m.a,{exact:!0,path:"/signup",component:H}),n.a.createElement(m.a,{exact:!0,path:"/:username/setup"},n.a.createElement(ae,{username:i,_id:u})),n.a.createElement(m.a,{exact:!0,path:"/:username/blog"},n.a.createElement(K,{loggedIn:c,username:i,_id:u})),n.a.createElement(m.a,{exact:!0,path:"/:username/blog/:id",component:Q}),n.a.createElement(m.a,{exact:!0,path:"/:username/gallery/work/:id",component:X}),n.a.createElement(m.a,{exact:!0,path:"/:username/gallery/:tag",component:Z}),n.a.createElement(m.a,{exact:!0,path:"/:username/gallery"},n.a.createElement(z,{loggedIn:c,username:i})),n.a.createElement(m.a,{exact:!0,path:"/:username/blog/update/:id",component:te}),n.a.createElement(m.a,{exact:!0,path:"/:username/gallery/update/:id",component:ee})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(n.a.createElement(ce,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()}).catch(e=>{console.error(e.message)})},42:function(e,t,a){e.exports=a(100)}},[[42,1,2]]]);
//# sourceMappingURL=main.7b5934be.chunk.js.map