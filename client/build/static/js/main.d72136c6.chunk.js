(this["webpackJsonpproject-three"]=this["webpackJsonpproject-three"]||[]).push([[0],{100:function(e,a,t){"use strict";t.r(a);var l=t(0),n=t.n(l),r=t(36),c=t.n(r),o=t(4),s=t(1),m=t(12),i=t(41),u=t(2);const d=Object(l.createContext)(),p=d.Provider,g=(e,a)=>{switch(a.type){case"SET_CURRENT_USER":return Object(u.a)({},e,{type:a.type,_id:a._id,username:a.username,postId:a.postId,postImg:a.postImg,postTitle:a.postTitle,postDesc:a.postDesc,postTags:a.postTags,password:""});case"LOGIN_USER":case"ADD_USER":return Object(u.a)({},a);case"GALLERY_PROPS":return Object(u.a)({},e,{},a);default:return e}};let E={type:"",_id:"0",username:"",journal:[],works:[],favorites:[],password:"",uploaded:!1,postId:"",postImg:"",postTitle:"",postDesc:"",postTags:[]};const b=e=>{e.value;let a=Object(i.a)(e,["value"]);const t=Object(l.useReducer)(g,E),r=Object(o.a)(t,2),c=r[0],s=r[1];return n.a.createElement(p,Object.assign({value:[c,s]},a))},f=()=>Object(l.useContext)(d);var v=e=>n.a.createElement("div",{className:"router-container"},e.children," ",e.loggedIn),h=t(16);var w=e=>{const a=e.works.works.map(e=>e.tags),t=[];a.filter(e=>{for(let a=0;a<e.length;a++)"nsfw"===e[a]&&t.push(e)});e.works.works.filter(e=>{var a,l=Object(h.a)(t);try{for(l.s();!(a=l.n()).done;){let t=a.value;if(e.tags===t)return e}}catch(n){l.e(n)}finally{l.f()}});const l=[];e.works.works.filter(a=>{var n,r=Object(h.a)(t);try{for(r.s();!(n=r.n()).done;){let t=n.value;a.tags!==t||e.loggedIn||(a.img="/images/r18-warning.jpg",l.push(a))}}catch(c){r.e(c)}finally{r.f()}return a});return n.a.createElement("div",{className:"recent-art"},n.a.createElement("h1",null,"Recently uploaded art:"),n.a.createElement("div",{className:"recent-box"},e.works.works.map(e=>n.a.createElement("div",{className:"post",key:e._id},n.a.createElement("div",{className:"gall-thumb"},n.a.createElement(s.b,{to:{pathname:"".concat(e.user.username,"/gallery/work/").concat(e._id),state:{postId:e._id,postTitle:e.title,postImg:e.img,postDesc:e.description,postTags:e.tags}}},n.a.createElement("img",{src:e.img,alt:e._id}))),n.a.createElement("div",null,n.a.createElement("h2",null,e.title))))))},y=t(5),j=t.n(y),O=function(e){return j.a.get("/api/user/"+e)},k=function(e){return j.a.post("/api/user",{username:e.username,password:e.password,email:e.email})},N=e=>j.a.put("/api/user/"+e._id,Object(u.a)({},e)),_=function(e){return j.a.post("/api/user/login",{username:e.username,password:e.password})},I=function(){return j.a.post("/api/user/logout")},x=function(){return j.a.get("/api/user")},S=()=>j.a.get("/api/artwork"),C=e=>j.a.post("/api/artwork",e),R=(e,a)=>j.a.put("/api/artwork/"+e,Object(u.a)({},a)),U=e=>j.a.delete("/api/artwork/"+e),T=e=>j.a.post("/api/blog",e),D=e=>j.a.get("/api/blog/"+e),P=(e,a)=>j.a.put("/api/blog/"+e,Object(u.a)({},a)),L=e=>j.a.delete("/api/blog/"+e),B=t(14);const F={"default-state":{gradients:[["#00a84c","#b3ff00"],["#00ffff","#556270"],["#ff0062","#7ea0c4"],["#6200ff","#fd0000"]],transitionSpeed:7e3}},G={source:"../images/bg.jpeg",blendingMode:"multiply"};var V=e=>{console.log("props in login",e);const a=Object(l.useState)({username:"",password:""}),t=Object(o.a)(a,2),r=t[0],c=t[1],m=Object(l.useState)({works:[]}),i=Object(o.a)(m,2),u=i[0],d=i[1];Object(l.useEffect)(()=>{S().then(e=>{d({works:e.data})})},[e.loggedIn]),console.log("art",u);const p=Object(l.useRef)(),g=Object(l.useRef)(),E=()=>{const e=p.current.value,a=g.current.value;c({username:e,password:a})},b=e=>{e.preventDefault();const a={username:r.username,password:r.password};console.log("components/Login.js login",a),_(a).then(e=>{console.log("Login.js api.login() result",e.data.username),window.location.assign("/".concat(e.data.username,"/gallery"))}).catch(e=>console.log(e))};return u?n.a.createElement("div",{className:"login-page"},n.a.createElement("div",{className:"container login"},n.a.createElement("div",null,n.a.createElement("h1",null,n.a.createElement("span",null,"X"),"folio:"),e.loggedIn?n.a.createElement("div",null,n.a.createElement("h1",null,"Welcome back ",e.username,"!"),n.a.createElement("p",null,n.a.createElement(s.b,{to:"".concat(e.username,"/gallery")},"Your Gallery")),n.a.createElement("p",null,n.a.createElement(s.b,{to:"".concat(e.username,"/blog")},"Your Blog"))):n.a.createElement("form",null,n.a.createElement("div",null,n.a.createElement("input",{type:"text",name:"username",placeholder:"username",onChange:E,ref:p})),n.a.createElement("div",null,n.a.createElement("input",{type:"password",name:"password",placeholder:"password",onChange:E,ref:g})),n.a.createElement(s.b,{to:"/Signup"},n.a.createElement("p",null,"New to Xfolio? Sign up here")),n.a.createElement("div",null,n.a.createElement("button",{name:"login",onClick:b},"sign in"))))),n.a.createElement(w,{works:u,loggedIn:e.loggedIn}),n.a.createElement(B.a,{isPausedWhenNotInView:"true",image:G,states:F,id:"canvas-image"})):n.a.createElement("div",{className:"login-page"},n.a.createElement("div",{className:"container login"},n.a.createElement("div",null,n.a.createElement("h1",null,n.a.createElement("span",null,"X"),"folio:"),e.loggedIn?n.a.createElement("div",null,n.a.createElement("h1",null,"Welcome back ",e.username,"!"),n.a.createElement("p",null,n.a.createElement(s.b,{to:"".concat(e.username,"/gallery")},"Your Gallery")),n.a.createElement("p",null,n.a.createElement(s.b,{to:"".concat(e.username,"/blog")},"Your Blog"))):n.a.createElement("form",null,n.a.createElement("div",null,n.a.createElement("input",{type:"text",name:"username",placeholder:"Username",onChange:E,ref:p})),n.a.createElement("div",null,n.a.createElement("input",{type:"password",name:"password",placeholder:"password",onChange:E,ref:g})),n.a.createElement(s.b,{to:"/Signup"},n.a.createElement("p",null,"New to Xfolio? Sign up here")),n.a.createElement("div",null,n.a.createElement("button",{name:"login",onClick:b},"sign in"))))),n.a.createElement(B.a,{isPausedWhenNotInView:"true",image:G,states:F,id:"canvas-image"}))};const W={"default-state":{gradients:[["#e5ff00","#ff5100"],["#00ffff","#556270"],["#ff0062","#7ea0c4"],["#6200ff","#fd0000"]],transitionSpeed:7e3}},Y={source:"../images/bg.jpeg",blendingMode:"multiply"};var H=()=>{const e=f(),a=Object(o.a)(e,2),t=(a[0],a[1],Object(l.useState)({})),r=Object(o.a)(t,2),c=r[0],m=r[1],i=Object(l.useRef)(),u=Object(l.useRef)(),d=Object(l.useRef)(),p=()=>{const e=i.current.value,a=u.current.value,t=d.current.value;m({username:a,password:t,email:e})};return n.a.createElement("div",{className:"signup-page"},n.a.createElement("div",{className:"container login signup"},n.a.createElement("div",null,n.a.createElement("form",null,n.a.createElement("h1",null,"Welcome to ",n.a.createElement("span",null,"X"),"folio!"),n.a.createElement("div",null,n.a.createElement("input",{type:"text",name:"email",placeholder:"email",onChange:p,ref:i})),n.a.createElement("div",null,n.a.createElement("input",{type:"text",name:"username",placeholder:"username",onChange:p,ref:u})),n.a.createElement("div",null,n.a.createElement("input",{type:"password",name:"password",placeholder:"password",onChange:p,ref:d})),n.a.createElement(s.b,{to:"/Login"},n.a.createElement("p",null,"Already have an account? Log in here")),n.a.createElement("div",null,n.a.createElement("button",{name:"signup",onClick:e=>{e.preventDefault();const a={email:c.email,username:c.username,password:c.password};k(a).then(()=>{_({username:c.username,password:c.password}),window.location.assign("".concat(c.username,"/setup"))})}},"sign up"),n.a.createElement("br",null))))),n.a.createElement(B.a,{isPausedWhenNotInView:"true",image:Y,states:W,id:"canvas-image"}))};var X=e=>{const a=e.location.state;return n.a.createElement("div",{className:"detail"},a?n.a.createElement("div",{className:"detail-box"},n.a.createElement("div",{className:"full-info"},n.a.createElement("div",null,n.a.createElement("h1",null,a.postTitle)),n.a.createElement("div",null,a.postDesc),n.a.createElement("div",{className:"tags"},n.a.createElement("p",null,"Tagged: ",a.postTags.map(e=>n.a.createElement("span",{key:e},e," ")))),n.a.createElement("p",null,n.a.createElement(s.b,{to:"../../../"+e.match.params.username+"/gallery"},"Back to gallery")),n.a.createElement("p",null,n.a.createElement(s.b,{to:""},"Home"))),n.a.createElement("div",{className:"full-image"},n.a.createElement("img",{className:"full-image",src:a.postImg,alt:a.postTitle}))):n.a.createElement("h3",null,"Loading..."))},A=t(13);var M=e=>{const a=f(),t=Object(o.a)(a,2),l=t[0],r=t[1],c=l.journal;return c.length?n.a.createElement("div",null,c.map(a=>n.a.createElement("div",{key:a._id,className:"postbox"},n.a.createElement(s.b,{to:{pathname:"blog/"+a._id,state:Object(u.a)({},a)}},n.a.createElement("h2",null,a.title)),n.a.createElement("div",null,a.body),n.a.createElement("div",{className:"tags"},a.tags),e.loggedIn?n.a.createElement("div",null,n.a.createElement("button",{className:"del-butt",onClick:()=>{return e=a._id,L(e),void r(Object(u.a)({},l,{uploaded:!0}));var e}},n.a.createElement(A.a,{icon:"trash"})),n.a.createElement("button",{className:"edit-butt"},n.a.createElement(s.b,{to:{pathname:"blog/update/".concat(a._id),state:Object(u.a)({},a,{user:e._id})}},n.a.createElement(A.a,{icon:"pencil-alt"})))):n.a.createElement("span",null)))):n.a.createElement("div",null,n.a.createElement("h3",null,"You don't have any posts yet"))};var J=e=>{console.log("props in NewPost",e);const a=f(),t=Object(o.a)(a,2),r=t[0],c=t[1],s=Object(l.useState)(),m=Object(o.a)(s,2),i=m[0],d=m[1],p=Object(l.useRef)(),g=Object(l.useRef)(),E=Object(l.useRef)(),b=e=>{e.preventDefault();const a=p.current.value,t=g.current.value,l=E.current.value.split(",").map(e=>e.trim().replace(/\s+/g,"_"));console.log({title:a,body:t,tags:[l]}),d({title:a,body:t,tags:l})},v=e=>{e.preventDefault();const a=i.title,t=i.body,l=i.tags,n=r._id;T({userId:n,title:a,body:t,tags:l}),c(Object(u.a)({},r,{type:"GALLERY_PROPS",uploaded:!0}))};return e.loggedInUser===e.pathUser?n.a.createElement("div",{className:"blog-upload"},n.a.createElement("h2",null,"Make a post:"),n.a.createElement("form",{onChange:b},n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"title"},"Title:"),n.a.createElement("br",null),n.a.createElement("input",{type:"text",name:"title",ref:p})),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"body"},"Post:"),n.a.createElement("br",null),n.a.createElement("textarea",{name:"body",ref:g})),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"tags"},"Tags, separated by a comma:"),n.a.createElement("br",null),n.a.createElement("input",{type:"text",name:"tags",ref:E})),n.a.createElement("div",null,n.a.createElement("button",{name:"submit",onClick:v},"Submit Post")))):n.a.createElement("span",null)};var K=e=>{const a=f(),t=Object(o.a)(a,2),r=t[0],c=t[1];console.log("props in blog",e);const m=window.location.pathname.split("/");Object(l.useEffect)(()=>{D(m[1]).then(e=>{c(Object(u.a)({},r,{_id:e.data._id,type:"GALLERY_PROPS",journal:e.data.journal,uploaded:!1}))}).catch(e=>console.log("err",e))},[r.uploaded]);return n.a.createElement("div",{className:"blog"},n.a.createElement("div",{className:"blog-upload"},e.loggedIn?n.a.createElement("div",null,n.a.createElement("h1",null,n.a.createElement("span",null,"H"),"ello ",e.username),n.a.createElement(J,{loggedInId:e._id,loggedInUser:e.username,pathUser:m[1]})):n.a.createElement("div",null,n.a.createElement("h2",null,m[3],"'s blog")),n.a.createElement("div",null,n.a.createElement(s.b,{to:"gallery"},"Go To Gallery")," "),n.a.createElement("div",null,n.a.createElement(s.b,{to:""},"Home")),e.loggedIn?n.a.createElement("div",null,n.a.createElement("p",null,n.a.createElement(s.b,{to:"#",onClick:()=>{I(),window.location.assign("../../")}},"Log out"))):n.a.createElement("div",null,n.a.createElement("p",null,n.a.createElement(s.b,{to:""},"Sign in")),n.a.createElement("p",null,n.a.createElement(s.b,{to:"/signup"},"Sign up")))),n.a.createElement("div",{className:"posts"},n.a.createElement(M,{loggedIn:e.loggedIn,_id:e._id})))};var $=e=>{console.log("props in upload",e);const a=f(),t=Object(o.a)(a,2),r=t[0],c=t[1],s=Object(l.useState)({message:"",file:"",fileUrl:"",url:""}),m=Object(o.a)(s,2),i=m[0],d=m[1],p=Object(l.useState)({title:"",postBody:"",tags:[]}),g=Object(o.a)(p,2),E=g[0],b=g[1],v=Object(l.useRef)(),h=Object(l.useRef)(),w=Object(l.useRef)(),y=Object(l.useRef)(),O=window.location.host,k=window.location.protocol,N=e=>{e.preventDefault();const a=v.current.files;if(a&&a.length>0){const t=a[0];d(Object(u.a)({},i,{file:t,fileUrl:URL.createObjectURL(e.target.files[0])}))}},_=e=>{e.preventDefault();const a=i.file;d(Object(u.a)({},i,{message:"Uploading..."}));const t=a.type,l="".concat(k,"//").concat(O,"/generate-put-url"),n={params:{Key:"".concat(r.username,"/works/").concat(Date.now(),"_").concat(a.name),ContentType:t},headers:{"Content-Type":t}};j.a.get(l,n).then(e=>{const t=e.data;j.a.put(t,a,n).then(e=>{d(Object(u.a)({},i,{message:"Upload Successful"}));const a=e.config.params,t="".concat(k,"//").concat(O,"/generate-put-url"),l={params:a};j.a.get(t,l).then(e=>{const a=e.data.replace(/\?.*/,"");d(Object(u.a)({},i,{url:a})),I(a)})}).catch(e=>{d(Object(u.a)({},i,{message:"Something went wrong, try again"})),console.log("err",e)})})},I=e=>{const a=E.title,t=E.postBody,l=E.tags,n=r._id;console.log("_id in handlePost",n),C({userId:n,url:e,title:a,postBody:t,tags:l}),d({fileUrl:""}),c(Object(u.a)({},r,{uploaded:!0})),h.current.value="",w.current.value="",y.current.value=""},x=e=>{e.preventDefault();const a=h.current.value,t=w.current.value,l=y.current.value.split(",").map(e=>e.trim().replace(/\s+/g,"_"));b(Object(u.a)({},E,{title:a,postBody:t,tags:l}))};return e.pathUser==e.loggedInUser?n.a.createElement("div",null,n.a.createElement("form",null,n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"upload"},"Choose an image"),n.a.createElement("input",{id:"upload-file",type:"file",name:"upload",accept:"image/*",onChange:N,ref:v})),n.a.createElement("div",{className:"upload-mess"},i.message),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"title"}," Title: "),n.a.createElement("input",{type:"text",name:"title",ref:h,onChange:x})),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"body"},"Description:"),n.a.createElement("textarea",{name:"body",ref:w,onChange:x})),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"tags"},"Tags, separated by a comma:"),n.a.createElement("input",{type:"text",name:"tags",ref:y,onChange:x})),n.a.createElement("div",null,n.a.createElement("button",{onClick:_},"Submit")),i.fileUrl?n.a.createElement("div",{className:"upload-prev"},n.a.createElement("img",{src:i.fileUrl,alt:"preview",width:"140px"})):n.a.createElement("h4",null,"Preview..."))):n.a.createElement("span",null)};var q=e=>{const a=e.tags;return n.a.createElement(s.b,{to:{pathname:"gallery/"+a,state:{works:e.works}},key:a},a)};var z=e=>{const a=f(),t=Object(o.a)(a,2),r=t[0],c=t[1],m=Object(l.useState)({works:[],pfp:"",nickname:"",bio:"",twitter:"",_id:""}),i=Object(o.a)(m,2),d=i[0],p=i[1],g=window.location.pathname.split("/");console.log("worksState",d),console.log("props",e),Object(l.useEffect)(()=>{O(g[1]).then(e=>{console.log("gallery get res",e.data),p({works:e.data.works,pfp:e.data.pfp,nickname:e.data.nickname,twitter:e.data.twitter,bio:e.data.bio,_id:e.data._id}),c(Object(u.a)({},r,{type:"GALLERY_PROPS",username:e.data.username,_id:e.data._id,uploaded:!1}))})},[r.uploaded]);const E=d.works,b=d.nickname,v=d.pfp,h=d.twitter,w=d.bio;console.log("works in gallery",E);const y=()=>{I(),window.location.assign("../../")};return E&&E.length?n.a.createElement("div",{className:"gallery-box"},n.a.createElement("div",{className:"profile"},n.a.createElement("h1",null,"Welcome to ",n.a.createElement("span",null,"X"),"folio: ",e.username),v?n.a.createElement("img",{src:v,alt:"profile picture",height:"150px",width:"150px"}):n.a.createElement("img",{src:"/images/default-pfp.jpg",alt:"profile picture",height:"150px",width:"150px"}),n.a.createElement("h4",null,b),w?n.a.createElement("p",null,"Bio: ",w):n.a.createElement("span",null),h?n.a.createElement("a",{href:h,target:"_blank"},n.a.createElement(A.a,{icon:["fab","twitter"]})," profile"):n.a.createElement("span",null),n.a.createElement("br",null),e.loggedIn?n.a.createElement("div",null,n.a.createElement(s.b,{className:"incognito-link",to:"../../".concat(e.username,"/setup")},"(Update Profile)"),n.a.createElement("hr",null),n.a.createElement($,{loggedInId:e._id,loggedInUser:e.username,pathUser:g[1]})):n.a.createElement("div",null,n.a.createElement("h2",null,"Now viewing ",g[1],"'s gallery")),n.a.createElement(s.b,{to:"blog"},"Blog Page"),n.a.createElement("div",null,n.a.createElement(s.b,{to:{pathname:"gallery/".concat("portfolio"),state:{works:E}}},"Portfolio")),n.a.createElement("div",null,n.a.createElement(s.b,{to:""},"Home")),e.loggedIn?n.a.createElement("p",null,n.a.createElement(s.b,{to:"#",onClick:y},"Log out")):n.a.createElement("div",null,n.a.createElement("p",null,n.a.createElement(s.b,{to:"/login"},"Sign in")),n.a.createElement("p",null,n.a.createElement(s.b,{to:"/signup"},"Sign up")))),n.a.createElement("div",{className:"gallery"},E.map(a=>n.a.createElement("div",{className:"gall",key:a._id},n.a.createElement("div",{className:"gall-thumb"},n.a.createElement(s.b,{to:{pathname:"gallery/work/"+a._id,state:{postId:a._id,postTitle:a.title,postImg:a.img,postDesc:a.description,postTags:a.tags}}},n.a.createElement("img",{src:a.img,alt:a.title}))),n.a.createElement("div",{className:"gall-info"},n.a.createElement("div",{className:"gall-title"},a.title),n.a.createElement("div",{className:"gall-tags"},a.tags.map(e=>n.a.createElement("span",{key:e},n.a.createElement(q,{works:E,tags:e})," "))),e.loggedIn?n.a.createElement("div",null,n.a.createElement("button",{className:"del-butt",onClick:()=>{return e=a._id,U(e),void c(Object(u.a)({},r,{uploaded:!0}));var e}},n.a.createElement(A.a,{icon:"trash"})),n.a.createElement("button",{className:"edit-butt"},n.a.createElement(s.b,{to:{pathname:"gallery/update/"+a._id,state:Object(u.a)({},a)}},n.a.createElement(A.a,{icon:"pencil-alt"})))):n.a.createElement("span",null)))))):n.a.createElement("div",{className:"gallery-box"},n.a.createElement("div",{className:"profile"},n.a.createElement("h1",null,"Welcome to ",n.a.createElement("span",null,"X"),"folio: ",e.username),v?n.a.createElement("img",{src:v,alt:"profile picture",height:"150px",width:"150px"}):n.a.createElement("img",{src:"/images/default-pfp.jpg",alt:"profile picture",height:"150px",width:"150px"}),n.a.createElement("h4",null,b),w?n.a.createElement("p",null,"Bio: ",w):n.a.createElement("span",null),h?n.a.createElement("a",{href:h,target:"_blank"},n.a.createElement(A.a,{icon:["fab","twitter"]})," profile"):n.a.createElement("span",null),e.loggedIn?n.a.createElement("div",null,n.a.createElement(s.b,{to:"../../".concat(e.username,"/setup")},"Update Profile"),n.a.createElement($,{loggedInId:e._id,loggedInUser:e.username,pathUser:g[1]})):n.a.createElement("div",null,n.a.createElement("h2",null,g[1],"'s gallery")),n.a.createElement(s.b,{to:"blog"},"Go To Blog"),e.loggedIn?n.a.createElement("div",null,n.a.createElement("p",null,n.a.createElement(s.b,{to:"#",onClick:y},"Log out"))):n.a.createElement("div",null,n.a.createElement("p",null,n.a.createElement(s.b,{to:"/login"},"Sign in")),n.a.createElement("p",null,n.a.createElement(s.b,{to:"/signup"},"Sign up"))),n.a.createElement("div",null,n.a.createElement(s.b,{to:""},"Home"))),n.a.createElement("div",{className:"gallery"},n.a.createElement("h3",null,"No posts yet!")))};var Q=e=>{const a=e.location.state;return n.a.createElement("div",{className:"single-post"},n.a.createElement(s.b,{to:{pathname:"../blog"}},"Back to blog"),a?n.a.createElement("div",null,n.a.createElement("div",{className:"post-title"},n.a.createElement("h1",null,a.title)),n.a.createElement("div",{className:"post-body"},n.a.createElement("p",null,a.body)),n.a.createElement("div",{className:"post-tags"},"Tagged: ",a.tags.map(e=>n.a.createElement("span",{key:e},e," "))),n.a.createElement("div",null,n.a.createElement(s.b,{onClick:()=>window.history.back()},"Go back"))):n.a.createElement("h3",null,"Loading..."))};var Z=e=>{const a=e.location.state.works.map(e=>e.tags),t=[];a.filter(a=>{for(let l=0;l<a.length;l++)a[l]===e.match.params.tag&&t.push(a)});const l=e.location.state.works.filter(e=>{var a,l=Object(h.a)(t);try{for(l.s();!(a=l.n()).done;){let t=a.value;if(e.tags===t)return e}}catch(n){l.e(n)}finally{l.f()}});return l.length?n.a.createElement("div",{className:"gallery-box"},n.a.createElement("div",{className:"profile"},n.a.createElement("h2",null,"Here's all artworks tagged '",e.match.params.tag,"'"),n.a.createElement("div",null,n.a.createElement("p",null,n.a.createElement(s.b,{to:"../../"+e.match.params.username+"/gallery"},"Go back")))),n.a.createElement("div",{className:"gallery"},l.map(e=>n.a.createElement("div",{key:e._id,className:"gall"},n.a.createElement("div",{className:"gall-thumb"},n.a.createElement(s.b,{to:{pathname:"work/"+e._id,state:{postId:e._id,postTitle:e.title,postImg:e.img,postDesc:e.description,postTags:e.tags}}},n.a.createElement("img",{src:e.img,alt:e.title}))),n.a.createElement("div",null,n.a.createElement("h2",null,n.a.createElement("i",null,e.title))),n.a.createElement("div",null,e.description),n.a.createElement("div",{className:"gall-tags"},e.tags))))):n.a.createElement("div",{className:"detail-box"},n.a.createElement("div",{className:"profile"},n.a.createElement("h2",null,"Here's all artworks tagged '",e.match.params.tag,"'"),n.a.createElement("div",null,n.a.createElement("p",null,n.a.createElement(s.b,{to:"../../"+e.match.params.username+"/gallery"},"Go back")))),n.a.createElement("div",{className:"gallery"},n.a.createElement("h1",null,"No posts tagged '",e.match.params.tag,"' yet")))};var ee=({location:e,match:a})=>{const t=Object(l.useState)(),r=Object(o.a)(t,2),c=r[0],m=r[1],i=e.state,u=a.params,d=Object(l.useRef)(),p=Object(l.useRef)(),g=Object(l.useRef)();return n.a.createElement("div",null,n.a.createElement("form",{onChange:()=>{m({title:d.current.value,description:p.current.value,tags:g.current.value.split(",")})}},n.a.createElement("div",{className:"detail-box"},n.a.createElement("div",{className:"full-info"},n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"title"},"Title:"),n.a.createElement("input",{type:"text",name:"title",defaultValue:i.title,ref:d})),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"body"},"Description:"),n.a.createElement("textarea",{name:"body",defaultValue:i.description,ref:p})),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"tags"},"Tags, separated by a comma:"),n.a.createElement("input",{name:"tags",type:"text",defaultValue:i.tags,ref:g})),n.a.createElement("div",null,n.a.createElement("button",{onClick:e=>{e.preventDefault(),R(u.id,c),window.location.assign("/"+u.username+"/gallery")}},"Save")),n.a.createElement("div",{className:"go-back"},n.a.createElement(s.b,{to:"/"+u.username+"/gallery"},"Go back"))),n.a.createElement("div",{className:"full-image"},n.a.createElement("img",{className:"full-image",src:i.img,alt:i.title})))))};var ae=e=>{const a=Object(l.useState)(),t=Object(o.a)(a,2),r=t[0],c=t[1],s=Object(l.useRef)(),m=Object(l.useRef)(),i=Object(l.useRef)();return n.a.createElement("div",{className:"dark"},n.a.createElement("div",null,n.a.createElement("h1",null,"update this post?")),n.a.createElement("div",{className:"blog-upload"},n.a.createElement("form",{onChange:()=>{c({title:s.current.value,body:m.current.value,tags:i.current.value})}},n.a.createElement("div",null,n.a.createElement("input",{type:"text",defaultValue:e.location.state.title,ref:s})),n.a.createElement("div",null,n.a.createElement("textarea",{defaultValue:e.location.state.body,ref:m})),n.a.createElement("div",null,n.a.createElement("input",{type:"text",defaultValue:e.location.state.tags,ref:i})),n.a.createElement("div",null,n.a.createElement("button",{onClick:a=>{a.preventDefault(),P(e.match.params.id,r),window.location.assign("../../../".concat(e.match.params.username,"/blog"))}},"Submit")))))};var te=e=>{const a=Object(l.useState)({message:"",file:"",fileUrl:"",url:""}),t=Object(o.a)(a,2),r=t[0],c=t[1],s=Object(l.useState)({nickname:"",bio:"",twitter:""}),m=Object(o.a)(s,2),i=m[0],d=m[1];console.log("fileState in NewProfile",r);const p=Object(l.useRef)(),g=Object(l.useRef)(),E=Object(l.useRef)(),b=Object(l.useRef)();Object(l.useEffect)(()=>{O(e.username).then(e=>{e.data.pfp?(d({nickname:e.data.nickname,bio:e.data.bio,twitter:e.data.twitter}),c(Object(u.a)({},r,{fileUrl:e.data.pfp}))):d({nickname:e.data.nickname,bio:e.data.bio,twitter:e.data.twitter})})},[e]);const f=window.location.host,v=window.location.protocol;console.log("bioState",i);const h=a=>{const t=i.nickname,l=i.bio,n=i.twitter;if(a){const r={_id:e._id,pfp:a,nickname:t,bio:l,twitter:n};N(r),window.location.assign("../../".concat(e.username,"/gallery"))}else{const a={_id:e._id,nickname:t,bio:l,twitter:n};N(a),window.location.assign("../../".concat(e.username,"/gallery"))}},w=()=>{const e=b.current.value,a=E.current.value,t=g.current.value;d(Object(u.a)({},i,{nickname:e,bio:a,twitter:t}))};return n.a.createElement("div",{className:"nuprofile-page"},n.a.createElement("div",{className:"container"},n.a.createElement("form",{className:"nuprofile"},n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"upload"},"Choose an image"),n.a.createElement("input",{id:"upload-file",type:"file",name:"upload",accept:"image/*",onChange:e=>{e.preventDefault();const a=p.current.files;if(a&&a.length>0){const t=a[0];c(Object(u.a)({},r,{file:t,fileUrl:URL.createObjectURL(e.target.files[0])}))}},ref:p})),r.fileUrl?n.a.createElement("div",{className:"upload-prev"},n.a.createElement("img",{src:r.fileUrl,alt:"preview",width:"140px"})):n.a.createElement("h4",null,"Preview..."),n.a.createElement("div",{className:"upload-mess"},r.message),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"nickname"},"Nickname: "),n.a.createElement("br",null),n.a.createElement("input",{type:"text",name:"nickname",ref:b,defaultValue:i.nickname,onChange:w})),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"bio"},"Bio:"),n.a.createElement("br",null),n.a.createElement("textarea",{name:"bio",ref:E,defaultValue:i.bio,onChange:w})),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"twit"},"Twitter handle:"),n.a.createElement("br",null),n.a.createElement("input",{type:"text",name:"twit",ref:g,defaultValue:i.twitter,onChange:w})),n.a.createElement("div",null,n.a.createElement("button",{onClick:a=>{if(a.preventDefault(),r.file){const a=r.file;c(Object(u.a)({},r,{message:"Uploading..."}));const t=a.type,l="".concat(v,"//").concat(f,"/generate-put-url"),n={params:{Key:"".concat(e.username,"/pfp/").concat(Date.now(),"_").concat(a.name),ContentType:t},headers:{"Content-Type":t}};j.a.get(l,n).then(e=>{const t=e.data;j.a.put(t,a,n).then(e=>{c(Object(u.a)({},r,{message:"Upload Successful"}));const a=e.config.params,t="".concat(v,"//").concat(f,"/generate-put-url"),l={params:a};j.a.get(t,l).then(e=>{const a=e.data.replace(/\?.*/,"");c(Object(u.a)({},r,{url:a})),h(a)})}).catch(e=>{c(Object(u.a)({},r,{message:"Something went wrong, try again"})),console.log("err",e)})})}else h()}},"Submit")))),n.a.createElement(B.a,{isPausedWhenNotInView:"true",image:{source:"../images/bg.jpeg",blendingMode:"multiply"},states:{"default-state":{gradients:[["#e5ff00","#ff5100"],["#00ffff","#556270"],["#ff0062","#7ea0c4"],["#6200ff","#fd0000"]],transitionSpeed:7e3}},id:"canvas-image"}))},le=t(17),ne=t(40),re=t(24);le.b.add(ne.a,re.b,re.a);var ce=()=>{const e=Object(l.useState)({loggedIn:!1,username:"",_id:""}),a=Object(o.a)(e,2),t=a[0],r=a[1];Object(l.useEffect)(()=>{x().then(e=>{r({loggedIn:!0,username:e.data.user[0].username,_id:e.data.user[0]._id})}).catch(e=>{console.log("error",e)})},[]);const c=t.loggedIn,i=t.username,u=t._id;return n.a.createElement(b,null,n.a.createElement(s.a,null,n.a.createElement(v,{loggedIn:c},n.a.createElement(m.c,null,n.a.createElement(m.a,{exact:!0,path:["/","/login"]},n.a.createElement(V,{loggedIn:c,username:i,id:u})),n.a.createElement(m.a,{exact:!0,path:"/signup",component:H}),n.a.createElement(m.a,{exact:!0,path:"/:username/setup"},n.a.createElement(te,{username:i,_id:u})),n.a.createElement(m.a,{exact:!0,path:"/:username/blog"},n.a.createElement(K,{loggedIn:c,username:i,_id:u})),n.a.createElement(m.a,{exact:!0,path:"/:username/blog/:id",component:Q}),n.a.createElement(m.a,{exact:!0,path:"/:username/gallery/work/:id",component:X}),n.a.createElement(m.a,{exact:!0,path:"/:username/gallery/:tag",component:Z}),n.a.createElement(m.a,{exact:!0,path:"/:username/gallery"},n.a.createElement(z,{loggedIn:c,username:i,_id:u})),n.a.createElement(m.a,{exact:!0,path:"/:username/blog/update/:id",component:ae}),n.a.createElement(m.a,{exact:!0,path:"/:username/gallery/update/:id",component:ee})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(n.a.createElement(ce,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()}).catch(e=>{console.error(e.message)})},42:function(e,a,t){e.exports=t(100)}},[[42,1,2]]]);
//# sourceMappingURL=main.d72136c6.chunk.js.map