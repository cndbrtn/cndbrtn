(this["webpackJsonpproject-three"]=this["webpackJsonpproject-three"]||[]).push([[0],{41:function(e,t,a){e.exports=a(99)},99:function(e,t,a){"use strict";a.r(t);var l=a(0),n=a.n(l),o=a(35),r=a.n(o),s=a(2),c=a(6),i=a(12),m=a(40),u=a(3);const d=Object(l.createContext)(),p=d.Provider,g=(e,t)=>{switch(t.type){case"SET_CURRENT_USER":return console.log("action inside SET CURRENT",t),Object(u.a)({},e,{type:t.type,_id:t._id,username:t.username,postId:t.postId,postImg:t.postImg,postTitle:t.postTitle,postDesc:t.postDesc,postTags:t.postTags,password:""});case"LOGIN_USER":case"ADD_USER":return Object(u.a)({},t);case"GALLERY_PROPS":return Object(u.a)({},e,{},t);default:return e}};let E={type:"",_id:"0",username:"",nickname:"",journal:[],works:[],favorites:[],password:"",uploaded:!1,postId:"",postImg:"",postTitle:"",postDesc:"",postTags:[]};const b=e=>{e.value;let t=Object(m.a)(e,["value"]);const a=Object(l.useReducer)(g,E),o=Object(s.a)(a,2),r=o[0],c=o[1];return n.a.createElement(p,Object.assign({value:[r,c]},t))},v=()=>Object(l.useContext)(d);var h=e=>(console.log("props.children",e.children),n.a.createElement("div",{className:"router-container"},e.children," ",e.loggedIn)),f=a(4),j=a.n(f),y=function(e){return j.a.get("/api/user/"+e)},w=function(e){return j.a.post("/api/user",{username:e.username,password:e.password,email:e.email})},O=function(e){return j.a.post("/api/user/login",{username:e.username,password:e.password})},_=function(){return j.a.get("/api/user")},k=e=>j.a.post("/api/artwork",e),N=e=>j.a.get("/api/artwork/"+e),S=e=>j.a.delete("/api/artwork/"+e),R=e=>j.a.post("/api/blog",e),I=e=>j.a.get("/api/blog/"+e),T=a(16);const x={"default-state":{gradients:[["#29323c","#485563"],["#FF6B6B","#556270"],["#80d3fe","#7ea0c4"],["#f0ab51","#eceba3"]],transitionSpeed:7e3}},C={source:"../images/bg.jpeg",blendingMode:"multiply"};var D=()=>{const e=Object(l.useState)({username:"",password:""}),t=Object(s.a)(e,2),a=t[0],o=t[1],r=Object(l.useRef)(),i=Object(l.useRef)(),m=()=>{const e=r.current.value,t=i.current.value;o({username:e,password:t})};console.log("state",a);return n.a.createElement("div",{className:"login-page"},n.a.createElement("div",{className:"container login"},n.a.createElement("div",null,n.a.createElement("form",null,n.a.createElement("div",null,n.a.createElement("input",{type:"text",name:"username",placeholder:"Username",onChange:m,ref:r})),n.a.createElement("div",null,n.a.createElement("input",{type:"password",name:"password",placeholder:"password",onChange:m,ref:i})),n.a.createElement("div",null,n.a.createElement("button",{name:"login",onClick:e=>{e.preventDefault();const t={username:a.username,password:a.password};console.log("components/Login.js login",t),O(t).then(e=>{console.log("Login.js api.login() result",e.data.username),window.location.assign("/".concat(e.data.username,"/gallery"))}).catch(e=>console.log(e))}},"sign in")))),n.a.createElement(c.b,{to:"/Signup"},n.a.createElement("p",null,"New to Xfolio? Sign up here"))),n.a.createElement(T.a,{isPausedWhenNotInView:"true",image:C,states:x,id:"canvas-image"}))};const L={"default-state":{gradients:[["#e5ff00","#485563"],["#FF6B6B","#556270"],["#80d3fe","#7ea0c4"],["#f0ab51","#eceba3"]],transitionSpeed:7e3}},P={source:"../images/bg.jpeg",blendingMode:"multiply"};var F=()=>{const e=v(),t=Object(s.a)(e,2),a=t[0],o=t[1],r=Object(l.useState)({}),i=Object(s.a)(r,2),m=i[0],d=i[1];console.log("state",a);const p=Object(l.useRef)(),g=Object(l.useRef)(),E=Object(l.useRef)(),b=()=>{const e=p.current.value,t=g.current.value,a=E.current.value;d({username:t,password:a,email:e})};return n.a.createElement("div",{className:"signup-page"},n.a.createElement("div",{className:"container login signup"},n.a.createElement("div",null,n.a.createElement("form",null,n.a.createElement("div",null,n.a.createElement("p",null,"Sign up:"),n.a.createElement("input",{type:"text",name:"email",placeholder:"email",onChange:b,ref:p})),n.a.createElement("div",null,n.a.createElement("input",{type:"text",name:"username",placeholder:"Username",onChange:b,ref:g})),n.a.createElement("div",null,n.a.createElement("input",{type:"password",name:"password",placeholder:"password",onChange:b,ref:E})),n.a.createElement("div",null,n.a.createElement("button",{name:"signup",onClick:e=>{e.preventDefault();const t={email:m.email,username:m.username,password:m.password};console.log("components/Signup.js sign up",t),w(t).then(e=>{console.log("Signup.js api.signup() result",e.data),O({username:m.username,password:m.password}).then(e=>{console.log("user data after post to api/login from signup",e.data),o(Object(u.a)({},a,{type:"SET_CURRENT_USER",username:e.data.username,_id:e.data._id}))}),window.location.assign("".concat(m.username,"/gallery"))}).catch(e=>{e&&console.log("components/Signup.js error",e)})}},"sign up"),n.a.createElement("br",null)))),n.a.createElement(c.b,{to:"/Login"},n.a.createElement("p",null,"Already have an account? Log in here"))),n.a.createElement(T.a,{isPausedWhenNotInView:"true",image:P,states:L,id:"canvas-image"}))};var B=({match:e})=>{const t=Object(l.useState)(),a=Object(s.a)(t,2),o=a[0],r=a[1],c=window.location.pathname.split("/");console.log(c);const i=e.params;return console.log("props.match",i),Object(l.useEffect)(()=>{N(i.username).then(e=>{const t=e.data.works;console.log("works in detail",e.data.works),t.filter(e=>{e._id===i.id&&r({user:e.user,postId:e._id,postImg:e.img,postTitle:e.title,postDesc:e.description,postTags:e.tags})})})},[]),console.log("state in detail",o),n.a.createElement("div",{className:"detail"},o?n.a.createElement("div",{className:"full-info"},n.a.createElement("div",null,n.a.createElement("h1",null,o.postTitle)),n.a.createElement("div",null,o.postDesc),n.a.createElement("div",{className:"tags"},n.a.createElement("p",null,"Tagged: ",o.postTags.map(e=>n.a.createElement("span",{key:e},e," ")))),n.a.createElement("div",{className:"full-image"},n.a.createElement("img",{className:"full-image",src:o.postImg,alt:o.postTitle}))):n.a.createElement("h3",null,"Loading..."))};var U=()=>{const e=v(),t=Object(s.a)(e,1)[0].journal;return t.length?n.a.createElement("div",null,t.map(e=>n.a.createElement("div",{key:e._id,className:"postbox"},n.a.createElement(c.b,{to:"blog/"+e._id},n.a.createElement("h2",null,e.title)),n.a.createElement("div",null,e.body),n.a.createElement("div",{className:"tags"},e.tags)))):n.a.createElement("div",null,n.a.createElement("h3",null,"You don't have any posts yet"))};var A=()=>{const e=v(),t=Object(s.a)(e,2),a=t[0],o=t[1],r=Object(l.useState)(),c=Object(s.a)(r,2),i=c[0],m=c[1],d=Object(l.useRef)(),p=Object(l.useRef)(),g=Object(l.useRef)();return console.log("postState",i),n.a.createElement("div",null,n.a.createElement("form",{onChange:e=>{e.preventDefault();const t=d.current.value,a=p.current.value,l=g.current.value.split(",").map(e=>e.trim().replace(/\s+/g,"_"));console.log({title:t,body:a,tags:[l]}),m({title:t,body:a,tags:l})}},n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"title"},"Title:"),n.a.createElement("input",{type:"text",name:"title",ref:d})),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"body"},"Post:"),n.a.createElement("textarea",{name:"body",ref:p})),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"tags"},"Tags, separated by a comma:"),n.a.createElement("input",{type:"text",name:"tags",ref:g})),n.a.createElement("div",null,n.a.createElement("button",{name:"submit",onClick:e=>{e.preventDefault();const t=i.title,l=i.body,n=i.tags,r=a._id;R({userId:r,title:t,body:l,tags:n}),o(Object(u.a)({},a,{type:"GALLERY_PROPS",uploaded:!0}))}},"Submit Post"))))};var G=e=>{const t=v(),a=Object(s.a)(t,2),o=a[0],r=a[1];console.log("props in blog",e);const i=window.location.toString().split("/");return console.log("url",i[3]),Object(l.useEffect)(()=>{I(i[3]).then(e=>{console.log("no props res",e.data),r(Object(u.a)({},o,{_id:e.data._id,type:"GALLERY_PROPS",journal:e.data.journal,uploaded:!1}))}).catch(e=>console.log("err",e))},[o.uploaded]),console.log("state",o),n.a.createElement("div",{className:"container blog"},n.a.createElement("div",{className:"profile"},n.a.createElement("h1",null,"Hello ",e.username),n.a.createElement(A,null),n.a.createElement(c.b,{to:"gallery"},"Gallery Page")),n.a.createElement("div",{className:"posts"},n.a.createElement(U,null)))};var W=()=>{const e=v(),t=Object(s.a)(e,2),a=t[0],o=t[1],r=Object(l.useState)({message:"",file:"",url:""}),c=Object(s.a)(r,2),i=c[0],m=c[1],d=Object(l.useState)({title:"",postBody:"",tags:[]}),p=Object(s.a)(d,2),g=p[0],E=p[1],b=Object(l.useRef)(),h=Object(l.useRef)(),f=Object(l.useRef)(),y=Object(l.useRef)(),w=Object(l.useRef)();console.log("uploadedImg",w);const O=window.location.host,_=e=>{const t=g.title,l=g.postBody,n=g.tags,r=a._id;console.log("_id in handlePost",r),k({userId:r,url:e,title:t,postBody:l,tags:n}),o(Object(u.a)({},a,{uploaded:!0})),w.current.src="",h.current.value="",f.current.value="",y.current.value=""},N=e=>{e.preventDefault();const t=h.current.value,a=f.current.value,l=y.current.value.split(",").map(e=>e.trim().replace(/\s+/g,"_"));E(Object(u.a)({},g,{title:t,postBody:a,tags:l}))};return n.a.createElement("div",null,n.a.createElement("form",null,n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"upload"},"Choose an image"),n.a.createElement("input",{id:"upload-file",type:"file",name:"upload",accept:"image/*",onChange:e=>{e.preventDefault();const t=b.current.files;if(t&&t.length>0){const e=t[0];m(Object(u.a)({},i,{file:e}));const a=new FileReader,l=w.current;l.file=e,a.onload=e=>{console.log(e.target.result),l.src=e.target.result},a.readAsDataURL(e)}},ref:b})),n.a.createElement("div",{className:"upload-mess"},i.message),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"title"}," Title: "),n.a.createElement("input",{type:"text",name:"title",ref:h,onChange:N})),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"body"},"Description:"),n.a.createElement("textarea",{name:"body",ref:f,onChange:N})),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"tags"},"Tags, separated by a comma:"),n.a.createElement("input",{type:"text",name:"tags",ref:y,onChange:N})),n.a.createElement("div",null,n.a.createElement("button",{onClick:e=>{e.preventDefault();const t=i.file;m(Object(u.a)({},i,{message:"Uploading..."}));const l=t.type,n="http://".concat(O,"/generate-put-url"),o={params:{Key:"".concat(a.username,"/works/").concat(Date.now(),"_").concat(t.name),ContentType:l},headers:{"Content-Type":l}};j.a.get(n,o).then(e=>{const a=e.data;j.a.put(a,t,o).then(e=>{console.log("put file",e.config.params),m(Object(u.a)({},i,{message:"Upload Successful"}));const t=e.config.params,a="http://".concat(O,"/generate-put-url"),l={params:t};j.a.get(a,l).then(e=>{const t=e.data.replace(/\?.*/,"");console.log("replace ? and key in url",t),m(Object(u.a)({},i,{url:t})),_(t)})}).catch(e=>{m(Object(u.a)({},i,{message:"Something went wrong, try again"})),console.log("err",e)})})}},"Submit")),n.a.createElement("div",{className:"upload-prev"},n.a.createElement("img",{ref:w,alt:"preview",width:"140px"}))))};var Y=e=>{console.log("tag props",e);const t=e.tags;return n.a.createElement(c.b,{to:{pathname:"gallery/"+t,state:{works:e.works}},key:t},t)},X=a(22);var J=e=>{const t=v(),a=Object(s.a)(t,2),o=a[0],r=a[1],i=Object(l.useState)({works:[]}),m=Object(s.a)(i,2),d=m[0],p=m[1],g=window.location.pathname.split("/");console.log("worksState",d),console.log("props",e),Object(l.useEffect)(()=>{y(g[1]).then(e=>{console.log("gallery get res",e.data),p({works:e.data.works}),r(Object(u.a)({},o,{type:"GALLERY_PROPS",username:e.data.username,_id:e.data._id,uploaded:!1}))})},[o.uploaded]);const E=d.works;return E&&E.length?n.a.createElement("div",{className:"gallery-box"},n.a.createElement("div",{className:"profile"},n.a.createElement("h1",null,"Welcome to Xfolio: ",e.username),n.a.createElement(W,null),n.a.createElement(c.b,{to:"blog"},"Blog Page")),n.a.createElement("div",{className:"gallery"},E.map(e=>n.a.createElement("div",{className:"gall",key:e._id},n.a.createElement("div",{className:"gall-thumb"},n.a.createElement(c.b,{to:"gallery/work/"+e._id,onClick:()=>(e=>{const t=E.filter(t=>{if(t._id===e)return t});console.log("detail click",t[0]);const a=t[0];r(Object(u.a)({},o,{postId:a._id,postImg:a.img,postTitle:a.title,postDesc:a.description,postTags:a.tags}))})(e._id)},n.a.createElement("img",{src:e.img,alt:e.title}))),n.a.createElement("div",{className:"gall-info"},n.a.createElement("div",null,n.a.createElement("i",null,e.title)),n.a.createElement("div",{className:"gall-descrip"},e.description),n.a.createElement("div",{className:"gall-tags"},e.tags.map(e=>n.a.createElement("span",{key:e},n.a.createElement(Y,{works:d.works,tags:e})," "))),n.a.createElement("div",null,n.a.createElement("button",{className:"del-butt",onClick:()=>{return t=e._id,S(t),void r(Object(u.a)({},o,{uploaded:!0}));var t}},n.a.createElement(X.a,{icon:"trash"})),n.a.createElement("button",{className:"edit-butt"},n.a.createElement(X.a,{icon:"pencil-alt"})))))))):n.a.createElement("div",{className:"gallery-box"},n.a.createElement("div",{className:"profile"},n.a.createElement("h1",null,"Welcome to Xfolio: ",e.username),n.a.createElement(W,null),n.a.createElement(c.b,{to:"blog"},"Blog Page")),n.a.createElement("div",{className:"gallery"},n.a.createElement("h3",null,"No posts yet!")))};var M=e=>{const t=Object(l.useState)(),a=Object(s.a)(t,2),o=a[0],r=a[1];return console.log(e.match),Object(l.useEffect)(()=>{I(e.match.params.username).then(t=>{console.log("user res",t.data.journal);const a=t.data.journal.filter(t=>{if(t._id===e.match.params.id)return t});console.log("filtered journal",a[0]),r({_id:a[0]._id,title:a[0].title,body:a[0].body,tags:a[0].tags})})},[]),console.log("poststate",o),n.a.createElement("div",{className:"single-post"},o?n.a.createElement("div",null,n.a.createElement("div",{className:"post-title"},n.a.createElement("h1",null,o.title)),n.a.createElement("div",{className:"post-body"},n.a.createElement("p",null,o.body)),n.a.createElement("div",{className:"post-tags"},o.tags.map(e=>n.a.createElement("span",{key:e},e," ")))):n.a.createElement("h3",null,"Loading..."))},V=a(39);var H=e=>{console.log("props in FilteredArt",e.location.state.works);const t=e.location.state.works.map(e=>e.tags),a=[];t.filter(t=>{for(let l=0;l<t.length;l++)t[l]===e.match.params.tag&&a.push(t)}),console.log("filtered tags",a);const l=e.location.state.works.filter(e=>{console.log("post in posts filter",e);var t,l=Object(V.a)(a);try{for(l.s();!(t=l.n()).done;){let a=t.value;if(e.tags===a)return e}}catch(n){l.e(n)}finally{l.f()}});return console.log("posts if they match???",l),n.a.createElement("div",null,n.a.createElement("div",null,n.a.createElement("h1",null,"All artworks tagged '",e.match.params.tag,"'")),n.a.createElement("div",null,l.map(e=>n.a.createElement("div",{key:e._id},n.a.createElement("div",null,n.a.createElement("h1",null,e.title)),n.a.createElement("div",null,n.a.createElement("img",{src:e.img,alt:e.title})),n.a.createElement("div",null,e.description),n.a.createElement("div",null,e.tags)))))},K=a(14),$=a(23);K.b.add($.b,$.a);var q=()=>{const e=Object(l.useState)({loggedIn:!1,username:"",_id:""}),t=Object(s.a)(e,2),a=t[0],o=t[1];console.log("isLoggedIn state",a),Object(l.useEffect)(()=>{_().then(e=>{console.log("res in App.js useEffect",e.data),o({loggedIn:!0,username:e.data.user[0].username,_id:e.data.user[0]._id})}).catch(e=>{console.log("error",e)})},[]);const r=a.loggedIn,m=a.username,u=a._id;return n.a.createElement(b,null,n.a.createElement(c.a,null,n.a.createElement(h,{loggedIn:r},n.a.createElement(i.c,null,n.a.createElement(i.a,{exact:!0,path:"/",component:D}),n.a.createElement(i.a,{exact:!0,path:"/login",component:D}),n.a.createElement(i.a,{exact:!0,path:"/signup",component:F}),n.a.createElement(i.a,{exact:!0,path:"/:username/blog"},n.a.createElement(G,{loggedIn:r,username:m,_id:u})),n.a.createElement(i.a,{exact:!0,path:"/:username/blog/:id",component:M}),n.a.createElement(i.a,{exact:!0,path:"/:username/gallery/work/:id",component:B}),n.a.createElement(i.a,{exact:!0,path:"/:username/gallery/:tag",component:H}),n.a.createElement(i.a,{exact:!0,path:"/:username/gallery"},n.a.createElement(J,{loggedIn:r,username:m}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(n.a.createElement(q,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()}).catch(e=>{console.error(e.message)})}},[[41,1,2]]]);
//# sourceMappingURL=main.ba6ecf3b.chunk.js.map